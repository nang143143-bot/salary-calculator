<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Khmer Salary Calculator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@400;700&family=Dangrek&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- HTML2Canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Battambang"', '"Poppins"', 'sans-serif'],
                        header: ['"Dangrek"', '"Poppins"', 'cursive'],
                    },
                    colors: {
                        khmerBlue: '#032EA1',
                        khmerRed: '#E00025',
                        khmerGold: '#FFB600',
                        darkNight: '#0f172a',
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Battambang', sans-serif;
            overflow-x: hidden;
        }
        body.lang-en, body.lang-vi {
            font-family: 'Poppins', sans-serif;
        }

        /* --- KRAMA PATTERN --- */
        .bg-krama {
            background-color: #f8fafc;
            background-image: 
                linear-gradient(90deg, rgba(200, 0, 0, 0.03) 50%, transparent 50%),
                linear-gradient(rgba(200, 0, 0, 0.03) 50%, transparent 50%);
            background-size: 20px 20px;
        }
        .dark .bg-krama {
            background-color: #0f172a;
            background-image: 
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 50%, transparent 50%),
                linear-gradient(rgba(255, 255, 255, 0.03) 50%, transparent 50%);
        }

        /* --- KRAMA STRIP --- */
        .krama-strip {
            height: 6px;
            width: 100%;
            background: repeating-linear-gradient(
                45deg,
                #E00025,
                #E00025 10px,
                #ffffff 10px,
                #ffffff 20px,
                #032EA1 20px,
                #032EA1 30px,
                #ffffff 30px,
                #ffffff 40px
            );
        }

        /* --- CARD STYLE --- */
        .khmer-card {
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            border-radius: 1rem;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease;
        }
        .dark .khmer-card {
            background: rgba(30, 41, 59, 0.95);
            border-color: rgba(255, 255, 255, 0.05);
        }

        h1, h2, h3, .font-header {
            font-family: 'Dangrek', cursive;
            letter-spacing: 0.5px;
        }

        /* --- GOLDEN PARTICLES --- */
        #particles-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0; overflow: hidden;
        }
        .gold-particle {
            position: absolute; top: -10px;
            background: linear-gradient(135deg, #FFD700, #FFF8DC);
            border-radius: 50%; box-shadow: 0 0 4px #FFD700;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        /* --- EXPENSE TOGGLE ANIMATION --- */
        #expenses-content {
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }
        .hidden-content {
            max-height: 0 !important;
            opacity: 0 !important;
            margin-top: 0 !important;
            pointer-events: none;
        }
        .visible-content {
            max-height: 1000px; /* Large enough to fit content */
            opacity: 1;
            margin-top: 1rem;
        }
        
        /* Receipt Pattern */
        .receipt-zigzag {
            background: linear-gradient(-45deg, transparent 16px, #F8FAFC 0), linear-gradient(45deg, transparent 16px, #F8FAFC 0);
            background-repeat: repeat-x;
            background-position: left bottom;
            background-size: 22px 32px;
            content: ""; display: block; width: 100%; height: 32px; position: relative; top: 0px; left: 0px;
        }
    </style>
</head>
<body class="bg-krama text-gray-800 dark:text-gray-100 min-h-screen transition-colors duration-500 relative flex flex-col">

    <div id="particles-container"></div>

    <!-- Navbar -->
    <nav class="sticky top-0 z-40 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md shadow-sm border-b border-gray-200 dark:border-gray-800">
        <div class="krama-strip absolute top-0 left-0"></div>
        <div class="max-w-4xl mx-auto px-4 py-3 mt-1 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-khmerBlue p-2 rounded-lg shadow-md animate-float">
                    <i data-lucide="calculator" class="w-6 h-6 text-white"></i>
                </div>
                <div>
                    <h1 class="text-xl md:text-2xl text-khmerBlue dark:text-khmerGold pt-1 tracking-wide" data-i18n="appTitle">·ûÇ·ûé·ûì·û∂·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ</h1>
                    <p class="text-[10px] text-gray-500 dark:text-gray-400 -mt-0.5 font-medium font-sans">Smart Calculator</p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <button onclick="toggleLanguage()" class="min-w-[35px] px-2 py-1 rounded-lg bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 text-khmerBlue dark:text-khmerGold text-xs font-bold transition-all border border-gray-200 dark:border-slate-700">
                    <span id="lang-label">KH</span>
                </button>
                <button onclick="openDownloadModal()" class="p-2 rounded-lg bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 text-khmerBlue dark:text-khmerGold transition-all active:scale-95" title="Download Report">
                    <i data-lucide="download" class="w-5 h-5"></i>
                </button>
                <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 text-khmerBlue dark:text-khmerGold transition-all">
                    <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
                    <i data-lucide="sun" class="w-5 h-5 hidden dark:block text-yellow-300"></i>
                </button>
            </div>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto p-4 md:p-6 space-y-6 flex-grow pb-32 relative z-10">
        
        <!-- SETUP SECTION -->
        <section class="khmer-card">
            <div class="krama-strip"></div>
            <div class="p-6">
                <h2 class="text-xl font-bold mb-6 text-khmerBlue dark:text-blue-400 flex items-center gap-2 font-header">
                    <i data-lucide="settings-2" class="w-6 h-6 text-khmerGold"></i>
                    <span data-i18n="settingsTitle">·ûÄ·û∂·ûö·ûÄ·üÜ·ûé·ûè·üã·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûÇ·üÑ·ûõ</span>
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div class="relative group">
                        <label class="block text-xs font-bold uppercase text-gray-500 dark:text-gray-400 mb-1.5 font-sans" data-i18n="baseSalary">·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûÇ·üÑ·ûõ ($)</label>
                        <input type="number" id="baseSalary" value="500" class="w-full p-4 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-khmerBlue focus:border-khmerBlue outline-none font-bold text-xl text-khmerBlue dark:text-white transition-all font-sans text-center" oninput="calculateAll()">
                    </div>
                    <div class="relative group">
                        <label class="block text-xs font-bold uppercase text-gray-500 dark:text-gray-400 mb-1.5 font-sans" data-i18n="workDays">·ûê·üí·ûÑ·üÉ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö/·ûÅ·üÇ</label>
                        <input type="number" id="workDays" value="26" class="w-full p-4 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-khmerBlue focus:border-khmerBlue outline-none text-lg font-sans text-center" oninput="calculateAll()">
                    </div>
                    <div class="relative group">
                        <label class="block text-xs font-bold uppercase text-gray-500 dark:text-gray-400 mb-1.5 font-sans" data-i18n="workHours">·ûò·üâ·üÑ·ûÑ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö/·ûê·üí·ûÑ·üÉ</label>
                        <input type="number" id="workHours" value="8" class="w-full p-4 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-khmerBlue focus:border-khmerBlue outline-none text-lg font-sans text-center" oninput="calculateAll()">
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-4 font-sans text-sm">
                    <div class="bg-gray-100 dark:bg-slate-800 rounded-lg py-2 px-3 text-center border-l-4 border-gray-400 shadow-sm">
                        <p class="text-[10px] text-gray-500 font-bold uppercase" data-i18n="rate1h">1 ·ûò·üâ·üÑ·ûÑ</p>
                        <p id="rate100" class="text-base font-bold text-gray-700 dark:text-gray-300">0.00</p>
                    </div>
                    <div class="bg-blue-50 dark:bg-blue-900/20 rounded-lg py-2 px-3 text-center border-l-4 border-khmerBlue shadow-sm">
                        <p class="text-[10px] text-khmerBlue dark:text-blue-300 font-bold uppercase">150% (OT)</p>
                        <p id="rate150" class="text-base font-bold text-khmerBlue dark:text-blue-200">0.00</p>
                    </div>
                    <div class="bg-red-50 dark:bg-red-900/20 rounded-lg py-2 px-3 text-center border-l-4 border-khmerRed shadow-sm">
                        <p class="text-[10px] text-khmerRed dark:text-red-300 font-bold uppercase">200% (OT)</p>
                        <p id="rate200" class="text-base font-bold text-khmerRed dark:text-red-200">0.00</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- MANUAL OT INPUTS -->
        <section class="khmer-card">
            <div class="krama-strip"></div>
            <div class="p-6">
                <h2 class="text-xl font-bold mb-4 text-gray-700 dark:text-white flex items-center gap-2 font-header">
                    <div class="w-2 h-6 bg-khmerGold rounded-full shadow-md"></div>
                    <span data-i18n="totalOtTitle">·ûü·ûö·ûª·ûî·ûò·üâ·üÑ·ûÑ OT</span>
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="relative">
                        <label class="block text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 font-sans" data-i18n="ot150">OT 150% (·ûò·üâ·üÑ·ûÑ)</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="bg-blue-100 text-khmerBlue text-[10px] font-bold px-1.5 py-0.5 rounded border border-blue-200">1.5x</span>
                            </div>
                            <input type="number" id="manualHours150" placeholder="0" class="w-full pl-14 p-4 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-xl font-bold focus:ring-2 focus:ring-khmerBlue outline-none text-khmerBlue dark:text-blue-300 transition font-sans" oninput="calculateAll(true)">
                        </div>
                    </div>
                    <div class="relative">
                        <label class="block text-sm font-bold text-gray-500 dark:text-gray-400 mb-2 font-sans" data-i18n="ot200">OT 200% (·ûò·üâ·üÑ·ûÑ)</label>
                        <div class="relative group">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <span class="bg-red-100 text-khmerRed text-[10px] font-bold px-1.5 py-0.5 rounded border border-red-200">2.0x</span>
                            </div>
                            <input type="number" id="manualHours200" placeholder="0" class="w-full pl-14 p-4 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-xl font-bold focus:ring-2 focus:ring-khmerRed outline-none text-khmerRed dark:text-red-300 transition font-sans" oninput="calculateAll(true)">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- INCOME & EXPENSE -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- INCOME -->
            <section class="khmer-card p-6 border-l-4 border-l-green-500">
                <h2 class="text-xl font-bold mb-6 text-green-700 dark:text-green-400 flex items-center gap-3 pb-4 border-b border-dashed border-slate-200 dark:border-slate-700 font-header">
                    <div class="bg-green-100 dark:bg-green-900 p-2 rounded-lg shadow-sm">
                        <i data-lucide="banknote" class="w-5 h-5 text-green-700 dark:text-green-300"></i>
                    </div>
                    <span data-i18n="incomeTitle">·ûÖ·üÜ·ûé·ûº·ûõ (Income)</span>
                </h2>
                <div class="space-y-4 font-sans">
                    <div class="flex justify-between items-center py-3 px-4 bg-green-50 dark:bg-green-900/10 rounded-xl border border-green-100 dark:border-green-800">
                        <span class="text-gray-600 dark:text-gray-300 text-sm font-bold" data-i18n="baseSalary">·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûÇ·üÑ·ûõ</span>
                        <span id="displayBaseSalary" class="font-bold text-gray-800 dark:text-white">$0.00</span>
                    </div>
                    <div class="flex justify-between items-center py-3 px-4 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-800">
                        <span class="text-khmerBlue dark:text-blue-300 text-sm font-bold" data-i18n="totalOtMoney">·ûî·üí·ûö·û∂·ûÄ·üã OT ·ûü·ûö·ûª·ûî</span>
                        <span id="displayTotalOT" class="font-bold text-khmerBlue dark:text-blue-300">$0.00</span>
                    </div>
                    <div class="space-y-3 pt-2">
                        <div class="flex items-center justify-between">
                            <label class="text-sm font-bold text-gray-500 dark:text-gray-400" data-i18n="foodAllowance">·ûê·üí·ûõ·üÉ·ûî·û∂·ûô</label>
                            <input type="number" class="income-input w-32 p-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-right focus:border-green-500 outline-none transition font-bold" placeholder="0" oninput="calculateAll(true)">
                        </div>
                        <div class="flex items-center justify-between">
                            <label class="text-sm font-bold text-gray-500 dark:text-gray-400" data-i18n="bonus">·ûõ·ûæ·ûÄ·ûë·ûπ·ûÄ·ûÖ·û∑·ûè·üí·ûè (Bonus)</label>
                            <input type="number" class="income-input w-32 p-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-right focus:border-green-500 outline-none transition font-bold" placeholder="0" oninput="calculateAll(true)">
                        </div>
                    </div>
                </div>
                <div class="mt-8 pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-between items-baseline font-sans">
                    <span class="font-bold text-gray-400 uppercase text-xs tracking-wider" data-i18n="totalIncome">·ûü·ûö·ûª·ûî·ûÖ·üÜ·ûé·ûº·ûõ</span>
                    <span id="totalIncome" class="text-2xl font-bold text-green-600 dark:text-green-400 drop-shadow-sm">$0.00</span>
                </div>
            </section>

            <!-- EXPENSE WITH EYE TOGGLE -->
            <section class="khmer-card p-6 border-l-4 border-l-khmerRed flex flex-col">
                <div class="flex justify-between items-center mb-4 border-b border-dashed border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-xl font-bold text-khmerRed dark:text-red-400 flex items-center gap-3 font-header">
                        <div class="bg-red-100 dark:bg-red-900 p-2 rounded-lg shadow-sm">
                            <i data-lucide="receipt" class="w-5 h-5 text-khmerRed dark:text-red-300"></i>
                        </div>
                        <span data-i18n="expenseTitle">·ûÖ·üÜ·ûé·û∂·ûô (Expenses)</span>
                    </h2>
                    
                    <!-- EYE TOGGLE BUTTON -->
                    <button id="btn-expense-toggle" onclick="toggleExpensesList()" class="p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 text-khmerRed dark:text-red-400 transition-all active:scale-95 shadow-sm border border-red-100 dark:border-red-900/50">
                        <i data-lucide="eye-off" class="w-5 h-5"></i>
                    </button>
                </div>
                
                <div id="expenses-content" class="hidden-content flex-1">
                    <div id="expenses-container" class="space-y-3 font-sans pt-2">
                        <!-- JS will insert rows here -->
                    </div>
                    <button onclick="addNewExpense()" class="mt-4 w-full py-2.5 rounded-xl border border-dashed border-red-300 dark:border-red-800 text-khmerRed dark:text-red-400 text-sm font-bold hover:bg-red-50 dark:hover:bg-red-900/20 transition flex items-center justify-center gap-2 bg-white dark:bg-transparent shadow-sm">
                        <i data-lucide="plus" class="w-4 h-4"></i> <span data-i18n="addExpense">·ûî·ûì·üí·ûê·üÇ·ûò·ûÖ·üÜ·ûé·û∂·ûô·ûê·üí·ûò·û∏</span>
                    </button>
                </div>
                
                <div class="mt-auto pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-between items-baseline font-sans">
                    <span class="font-bold text-gray-400 uppercase text-xs tracking-wider" data-i18n="totalExpense">·ûü·ûö·ûª·ûî·ûÖ·üÜ·ûé·û∂·ûô</span>
                    <span id="totalExpense" class="text-2xl font-bold text-khmerRed dark:text-red-400 drop-shadow-sm">$0.00</span>
                </div>
            </section>
        </div>

        <!-- FOOTER INFO -->
        <footer class="text-center py-4 flex flex-col items-center gap-6 mb-20 relative z-20">
             <!-- Created By -->
             <div class="flex items-center gap-2 text-gray-400 text-xs font-sans bg-white/60 dark:bg-slate-800/60 px-4 py-1.5 rounded-full border border-gray-200 dark:border-slate-700 backdrop-blur-sm shadow-sm">
                 <span data-i18n="createdBy">·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûä·üÑ·ûô</span>
                 <span id="creator-name" class="font-bold text-khmerBlue dark:text-khmerGold">·û†·üä·ûª·ûì ·ûü·üÜ·ûé·û∂·ûÑ</span>
             </div>
             
             <!-- Donate Button -->
             <button onclick="toggleModal('donate-modal')" class="relative inline-flex items-center gap-3 px-8 py-3 rounded-xl bg-gradient-to-r from-khmerGold to-orange-500 shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 hover:-translate-y-1 transition-all duration-300 active:scale-95 group border border-white/20">
                 <div class="bg-white/20 p-1.5 rounded-lg backdrop-blur-sm">
                    <i data-lucide="coffee" class="w-5 h-5 text-white"></i>
                 </div>
                 <span class="text-white font-bold text-base font-sans tracking-wide" data-i18n="donateBtn">Donate Admin</span>
             </button>

             <!-- Social -->
             <div class="flex gap-6 items-center justify-center">
                 <a href="https://t.me/hunsamnang" target="_blank" class="text-gray-400 hover:text-[#24A1DE] transition-colors bg-white dark:bg-slate-800 p-2.5 rounded-full shadow-sm hover:shadow-md hover:-translate-y-1">
                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>
                 </a>
                 <a href="https://wa.me/qr/H35HQISESRRLB1" target="_blank" class="text-gray-400 hover:text-[#25D366] transition-colors bg-white dark:bg-slate-800 p-2.5 rounded-full shadow-sm hover:shadow-md hover:-translate-y-1">
                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-phone-call"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/><path d="M14.05 2a9 9 0 0 1 8 7.94"/><path d="M14.05 6A5 5 0 0 1 18 10"/></svg>
                 </a>
                 <a href="https://www.facebook.com/share/1PWhx9BWRR/?mibextid=wwXIfr" target="_blank" class="text-gray-400 hover:text-[#1877F2] transition-colors bg-white dark:bg-slate-800 p-2.5 rounded-full shadow-sm hover:shadow-md hover:-translate-y-1">
                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                 </a>
             </div>
        </footer>

        <!-- GRAND TOTAL FLOATING BAR -->
        <div id="grandTotalBar" class="fixed bottom-4 left-0 right-0 z-40 px-4">
            <section class="max-w-4xl mx-auto relative bg-khmerBlue dark:bg-slate-800 text-white p-4 rounded-2xl shadow-2xl flex items-center justify-between overflow-hidden border border-white/20 backdrop-blur-xl group">
                <!-- Decoration -->
                <div class="absolute top-0 right-0 h-full w-24 bg-khmerGold/10 -skew-x-12 transform translate-x-8"></div>
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:animate-[shimmer_2s_infinite]"></div>
                
                <div class="relative z-10 flex items-center gap-3">
                    <div class="bg-white/10 p-2 rounded-lg hidden sm:block backdrop-blur-sm border border-white/10">
                        <i data-lucide="wallet" class="w-6 h-6 text-khmerGold"></i>
                    </div>
                    <div>
                        <h3 class="text-gray-200 text-xs font-bold uppercase tracking-wider mb-0.5 font-sans" data-i18n="balanceTitle">·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûì·üÖ·ûü·ûõ·üã (Balance)</h3>
                        <p class="text-[10px] text-white/60 font-sans" data-i18n="balanceSub">·ûü·ûö·ûª·ûî·ûë·ûª·ûÄ·ûÄ·üí·ûì·ûª·ûÑ·ûÄ·ûº·ûì·ûá·üí·ûö·ûº·ûÄ üêñ</p>
                    </div>
                </div>
                <h1 id="grandTotal" class="relative z-10 text-3xl font-bold tracking-tight text-white font-mono drop-shadow-md">$0.00</h1>
            </section>
        </div>
    </main>

    <!-- DOWNLOAD REPORT MODAL -->
    <div id="download-modal" class="fixed inset-0 z-50 hidden modal-overlay" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-darkNight/80 backdrop-blur-sm transition-opacity" onclick="toggleModal('download-modal')"></div>
        <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-2xl bg-white dark:bg-darkCard text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-md modal-enter border-4 border-khmerBlue">
                <!-- Krama Strip on Modal -->
                <div class="krama-strip absolute top-0 left-0"></div>
                
                <!-- Report Preview -->
                <div id="report-capture-area" class="bg-white p-8 font-sans relative text-stone-800">
                    <div class="receipt-zigzag absolute top-0 left-0 w-full"></div>
                    
                    <div class="text-center mb-6 mt-4">
                        <div class="mx-auto w-12 h-12 bg-khmerBlue rounded-full flex items-center justify-center mb-2 shadow-lg">
                            <i data-lucide="calculator" class="w-6 h-6 text-white"></i>
                        </div>
                        <h3 class="text-xl font-header text-khmerBlue" data-i18n="appTitle">Salary Calculator</h3>
                        <p class="text-xs text-gray-500" id="report-date">Date: --/--/----</p>
                    </div>

                    <div class="space-y-3 border-t border-dashed border-gray-300 pt-4">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600" data-i18n="incomeTitle">Income</span>
                            <span class="font-bold text-green-600" id="report-income">$0.00</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600" data-i18n="expenseTitle">Expenses</span>
                            <span class="font-bold text-red-500" id="report-expense">$0.00</span>
                        </div>
                    </div>

                    <div class="my-4 border-t border-dashed border-gray-300"></div>

                    <div id="report-expense-list" class="space-y-1 mb-4 text-xs text-gray-500">
                    </div>

                    <div class="bg-khmerBlue text-white p-4 rounded-xl flex justify-between items-center shadow-lg">
                        <span class="font-bold text-sm" data-i18n="balanceTitle">NET BALANCE</span>
                        <span class="font-bold text-2xl" id="report-balance">$0.00</span>
                    </div>

                    <div class="text-center mt-6 pt-4 border-t border-gray-100">
                        <p class="text-[10px] text-gray-400">Created by <span class="text-khmerBlue font-bold">·û†·üä·ûª·ûì ·ûü·üÜ·ûé·û∂·ûÑ</span></p>
                    </div>
                </div>

                <!-- Actions -->
                <div class="bg-gray-50 dark:bg-slate-700/50 px-4 py-3 sm:px-6 flex gap-3 justify-center">
                    <button onclick="downloadImage()" class="flex-1 inline-flex justify-center items-center gap-2 rounded-xl bg-khmerBlue hover:bg-blue-800 text-white px-4 py-2 text-sm font-bold shadow-sm transition-all">
                        <i data-lucide="download" class="w-4 h-4"></i> <span data-i18n="downloadBtn">Download Image</span>
                    </button>
                    <button onclick="toggleModal('download-modal')" class="flex-1 inline-flex justify-center items-center gap-2 rounded-xl bg-white border border-gray-300 hover:bg-gray-100 text-gray-700 px-4 py-2 text-sm font-bold shadow-sm transition-all" data-i18n="btnClose">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- DONATE MODAL -->
    <div id="donate-modal" class="fixed inset-0 z-50 hidden modal-overlay" aria-labelledby="donate-modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/80 backdrop-blur-sm transition-opacity" onclick="toggleModal('donate-modal')"></div>
        <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
            <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-xs modal-enter border-t-4 border-khmerGold">
                <div class="bg-gradient-to-br from-khmerBlue to-blue-900 p-6 text-center text-white">
                    <div class="mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-white/20 mb-3 backdrop-blur-sm">
                        <i data-lucide="coffee" class="w-7 h-7 text-white"></i>
                    </div>
                    <h3 class="text-xl font-bold font-sans mb-1" id="donate-modal-title" data-i18n="donateTitle">
                        ·ûß·ûî·ûè·üí·ûê·ûò·üí·ûó·ûÇ·û∂·üÜ·ûë·üí·ûö Admin ‚òï
                    </h3>
                    <p class="text-xs text-blue-200 font-sans" data-i18n="donateSub">
                        Scan. Pay. Done.
                    </p>
                </div>
                <div class="p-6 text-center">
                    <div class="bg-white p-2 rounded-xl border border-gray-200 shadow-sm inline-block">
                        <div class="w-48 h-48 bg-gray-100 rounded-lg overflow-hidden relative">
                            <!-- REPLACE WITH YOUR QR CODE URL HERE -->
                            <img src="my_qr.jpg" alt="ABA QR Code" class="w-full h-full object-contain">
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="text-xs text-gray-500 font-bold uppercase tracking-widest mb-1">ABA Bank</p>
                        <p class="text-base font-bold text-khmerBlue">HUN SAMNANG</p>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 flex justify-center">
                    <button type="button" class="inline-flex w-full justify-center rounded-xl bg-gray-200 text-gray-700 hover:bg-gray-300 px-4 py-2 text-sm font-bold shadow-sm transition-all sm:w-auto font-sans" onclick="toggleModal('donate-modal')" data-i18n="btnClose">·ûî·û∑·ûë</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide immediately
        lucide.createIcons();

        // --- TRANSLATIONS ---
        const translations = {
            km: {
                appTitle: "·ûÇ·ûé·ûì·û∂·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ",
                otTableBtn: "·ûè·û∂·ûö·û∂·ûÑ OT",
                settingsTitle: "·ûÄ·û∂·ûö·ûÄ·üÜ·ûé·ûè·üã·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûÇ·üÑ·ûõ",
                baseSalary: "·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûÇ·üÑ·ûõ ($)",
                workDays: "·ûê·üí·ûÑ·üÉ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö/·ûÅ·üÇ",
                workHours: "·ûò·üâ·üÑ·ûÑ·ûí·üí·ûú·ûæ·ûÄ·û∂·ûö/·ûê·üí·ûÑ·üÉ",
                rate1h: "1 ·ûò·üâ·üÑ·ûÑ",
                totalOtTitle: "·ûü·ûö·ûª·ûî·ûò·üâ·üÑ·ûÑ OT",
                ot150: "OT 150% (·ûò·üâ·üÑ·ûÑ)",
                ot200: "OT 200% (·ûò·üâ·üÑ·ûÑ)",
                incomeTitle: "·ûÖ·üÜ·ûé·ûº·ûõ (Income)",
                totalOtMoney: "·ûî·üí·ûö·û∂·ûÄ·üã OT ·ûü·ûö·ûª·ûî",
                foodAllowance: "·ûê·üí·ûõ·üÉ·ûî·û∂·ûô",
                bonus: "·ûõ·ûæ·ûÄ·ûë·ûπ·ûÄ·ûÖ·û∑·ûè·üí·ûè (Bonus)",
                totalIncome: "·ûü·ûö·ûª·ûî·ûÖ·üÜ·ûé·ûº·ûõ",
                expenseTitle: "·ûÖ·üÜ·ûé·û∂·ûô (Expenses)",
                addExpense: "·ûî·ûì·üí·ûê·üÇ·ûò·ûÖ·üÜ·ûé·û∂·ûô·ûê·üí·ûò·û∏",
                totalExpense: "·ûü·ûö·ûª·ûî·ûÖ·üÜ·ûé·û∂·ûô",
                createdBy: "·ûî·ûÑ·üí·ûÄ·ûæ·ûè·ûä·üÑ·ûô",
                donateBtn: "Donate Admin",
                balanceTitle: "·ûî·üí·ûö·û∂·ûÄ·üã·ûÅ·üÇ·ûì·üÖ·ûü·ûõ·üã (Balance)",
                balanceSub: "·ûü·ûö·ûª·ûî·ûë·ûª·ûÄ·ûÄ·üí·ûì·ûª·ûÑ·ûÄ·ûº·ûì·ûá·üí·ûö·ûº·ûÄ",
                otModalTitle: "·ûè·û∂·ûö·û∂·ûÑ·ûÄ·ûè·üã·ûò·üâ·üÑ·ûÑ",
                thDate: "·ûÄ·û∂·ûõ·ûî·ûö·û∑·ûÖ·üí·ûÜ·üÅ·ûë",
                thIn: "·ûÖ·ûº·ûõ",
                thOut: "·ûÖ·üÅ·ûâ",
                btnAddRow: "·ûî·ûì·üí·ûê·üÇ·ûò·ûá·ûΩ·ûö·ûê·üí·ûò·û∏",
                btnClose: "·ûî·û∑·ûë",
                donateTitle: "·ûß·ûî·ûè·üí·ûê·ûò·üí·ûó·ûÇ·û∂·üÜ·ûë·üí·ûö Admin ‚òï",
                donateSub: "Scan. Pay. Done.",
                expenseNamePlaceholder: "·ûà·üí·ûò·üÑ·üá·ûÖ·üÜ·ûé·û∂·ûô",
                exportTitle: "·ûö·ûî·û∂·ûô·ûÄ·û∂·ûö·ûé·üç·ûü·ûÑ·üí·ûÅ·üÅ·ûî",
                downloadBtn: "·ûë·û∂·ûâ·ûô·ûÄ (·ûö·ûº·ûî·ûó·û∂·ûñ)"
            },
            en: {
                appTitle: "Salary Calculator",
                otTableBtn: "OT Table",
                settingsTitle: "Base Salary Settings",
                baseSalary: "Base Salary ($)",
                workDays: "Work Days/Month",
                workHours: "Work Hours/Day",
                rate1h: "1 Hour",
                totalOtTitle: "Total OT Hours",
                ot150: "OT 150% (Hours)",
                ot200: "OT 200% (Hours)",
                incomeTitle: "Income",
                totalOtMoney: "Total OT Amount",
                foodAllowance: "Food Allowance",
                bonus: "Incentive (Bonus)",
                totalIncome: "Total Income",
                expenseTitle: "Expenses",
                addExpense: "Add New Expense",
                totalExpense: "Total Expense",
                createdBy: "Created By",
                donateBtn: "Donate Admin",
                balanceTitle: "Net Balance",
                balanceSub: "Savings for Piggy Bank",
                otModalTitle: "Overtime Record",
                thDate: "Date",
                thIn: "In",
                thOut: "Out",
                btnAddRow: "Add New Row",
                btnClose: "Close",
                donateTitle: "Support Admin ‚òï",
                donateSub: "Scan. Pay. Done.",
                expenseNamePlaceholder: "Expense Name",
                exportTitle: "Summary Report",
                downloadBtn: "Download Image"
            },
            vi: {
                appTitle: "T√≠nh L∆∞∆°ng",
                otTableBtn: "B·∫£ng OT",
                settingsTitle: "C√†i ƒê·∫∑t L∆∞∆°ng C∆° B·∫£n",
                baseSalary: "L∆∞∆°ng C∆° B·∫£n ($)",
                workDays: "Ng√†y L√†m Vi·ªác/Th√°ng",
                workHours: "Gi·ªù L√†m Vi·ªác/Ng√†y",
                rate1h: "1 Gi·ªù",
                totalOtTitle: "T·ªïng Gi·ªù OT",
                ot150: "OT 150% (Gi·ªù)",
                ot200: "OT 200% (Gi·ªù)",
                incomeTitle: "Thu Nh·∫≠p (Income)",
                totalOtMoney: "T·ªïng Ti·ªÅn OT",
                foodAllowance: "Ti·ªÅn ƒÇn",
                bonus: "Th∆∞·ªüng (Bonus)",
                totalIncome: "T·ªïng Thu Nh·∫≠p",
                expenseTitle: "Chi Ph√≠ (Expenses)",
                addExpense: "Th√™m Chi Ph√≠ M·ªõi",
                totalExpense: "T·ªïng Chi Ph√≠",
                createdBy: "T·∫°o b·ªüi",
                donateBtn: "Donate Admin",
                balanceTitle: "S·ªë D∆∞ Th·ª±c T·∫ø (Balance)",
                balanceSub: "Ti·∫øt ki·ªám cho heo ƒë·∫•t",
                otModalTitle: "Ghi Ch√©p OT",
                thDate: "Ng√†y",
                thIn: "V√†o",
                thOut: "Ra",
                btnAddRow: "Th√™m D√≤ng M·ªõi",
                btnClose: "ƒê√≥ng",
                donateTitle: "·ª¶ng H·ªô Admin ‚òï",
                donateSub: "Qu√©t. Tr·∫£. Xong.",
                expenseNamePlaceholder: "T√™n chi ph√≠",
                exportTitle: "B√°o C√°o T√≥m T·∫Øt",
                downloadBtn: "T·∫£i ·∫¢nh"
            }
        };

        const expenseDictionary = {
            fuel: { km: '·ûê·üí·ûõ·üÉ·ûü·û∂·üÜ·ûÑ', en: 'Gasoline', vi: 'XƒÉng xe' },
            debt: { km: '·ûü·ûÑ·ûÇ·üÅ', en: 'Debts', vi: 'Tr·∫£ n·ª£' },
            rent: { km: '·ûï·üí·ûë·üá·ûá·ûΩ·ûõ', en: 'Rent', vi: 'Ti·ªÅn nh√†' },
            skincare: { km: 'Skin Care', en: 'Skin Care', vi: 'M·ªπ ph·∫©m' },
            internet: { km: 'Internet', en: 'Internet', vi: 'Internet' },
            clothes: { km: '·ûü·ûò·üí·ûõ·üÄ·ûÄ·ûî·üÜ·ûñ·û∂·ûÄ·üã', en: 'Clothes', vi: 'Qu·∫ßn √°o' },
            food: { km: '·ûê·üí·ûõ·üÉ·û¢·û∂·û†·û∂·ûö', en: 'Food', vi: 'ƒÇn u·ªëng' },
            coffee: { km: '·ûê·üí·ûõ·üÉ·ûÄ·û∂·û†·üí·ûú·üÅ', en: 'Coffee', vi: 'C√† ph√™' }
        };

        const expenseIcons = {
            fuel: 'fuel',
            debt: 'refresh-ccw',
            rent: 'home',
            skincare: 'sparkles',
            internet: 'wifi',
            clothes: 'shirt',
            food: 'utensils',
            coffee: 'coffee'
        };

        const defaultKeys = ['fuel', 'debt', 'rent', 'skincare', 'internet', 'clothes', 'food', 'coffee'];

        let currentLang = localStorage.getItem('lang') || 'km';

        function toggleLanguage() {
            if (currentLang === 'km') {
                currentLang = 'en';
            } else if (currentLang === 'en') {
                currentLang = 'vi';
            } else {
                currentLang = 'km';
            }
            localStorage.setItem('lang', currentLang);
            updateLanguage();
        }

        function updateLanguage() {
            const langLabel = document.getElementById('lang-label');
            if (currentLang === 'km') {
                langLabel.innerText = 'KH';
            } else if (currentLang === 'en') {
                langLabel.innerText = 'EN';
            } else {
                langLabel.innerText = 'VN';
            }
            
            document.body.classList.remove('lang-en', 'lang-vi');
            if(currentLang === 'en') {
                document.body.classList.add('lang-en');
            } else if(currentLang === 'vi') {
                document.body.classList.add('lang-vi');
            }

            const creatorNameEl = document.getElementById('creator-name');
            if (creatorNameEl) {
                creatorNameEl.innerText = currentLang === 'km' ? '·û†·üä·ûª·ûì ·ûü·üÜ·ûé·û∂·ûÑ' : 'HUN SAMNANG';
            }

            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[currentLang][key]) {
                    el.innerText = translations[currentLang][key];
                }
            });

            const expInputs = document.querySelectorAll('.expense-name-input');
            expInputs.forEach(input => {
                input.placeholder = translations[currentLang].expenseNamePlaceholder;
            });

            const expenseRows = document.querySelectorAll('.expense-name-input[data-key]');
            expenseRows.forEach(input => {
                const key = input.getAttribute('data-key');
                if (expenseDictionary[key]) {
                    input.value = expenseDictionary[key][currentLang];
                }
            });
        }

        function initExpenses() {
            const container = document.getElementById('expenses-container');
            container.innerHTML = '';
            defaultKeys.forEach(key => {
                createExpenseRow(expenseDictionary[key][currentLang], expenseIcons[key], key);
            });
        }

        function createExpenseRow(nameVal = '', iconName = 'receipt', key = null) {
            const container = document.getElementById('expenses-container');
            const div = document.createElement('div');
            div.className = "flex items-center justify-between gap-2 group";
            
            const dataKeyAttr = key ? `data-key="${key}"` : '';

            div.innerHTML = `
                <div class="flex items-center gap-2 flex-1 overflow-hidden">
                    <i data-lucide="${iconName}" class="w-4 h-4 text-red-300 shrink-0"></i>
                    <input type="text" value="${nameVal}" ${dataKeyAttr} class="expense-name-input bg-transparent border-b border-transparent focus:border-red-300 outline-none w-full text-sm text-gray-600 dark:text-gray-400 placeholder-gray-400 font-sans" placeholder="${translations[currentLang].expenseNamePlaceholder}">
                </div>
                <div class="flex items-center gap-2">
                    <input type="number" class="expense-input w-24 p-2 bg-white dark:bg-slate-900 border border-red-100 dark:border-gray-700 rounded-lg text-right focus:border-santaRed outline-none transition text-sm" placeholder="0" oninput="calculateAll(true)">
                    <button onclick="this.closest('.group').remove(); calculateAll(true)" class="text-gray-300 hover:text-red-500 p-1 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition shrink-0">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
            `;
            container.appendChild(div);
            lucide.createIcons();
        }

        function addNewExpense() {
            createExpenseRow('', 'receipt');
        }

        // --- PARTICLE EFFECT ---
        function createGoldParticle() {
            const particle = document.createElement('div');
            particle.className = 'gold-particle';
            particle.style.left = Math.random() * 100 + 'vw';
            const size = Math.random() * 3 + 3 + 'px';
            particle.style.width = size;
            particle.style.height = size;
            particle.style.opacity = Math.random() * 0.5 + 0.3;
            
            const duration = Math.random() * 5 + 5;
            particle.style.animationDuration = duration + 's';
            
            document.getElementById('particles-container').appendChild(particle);
            setTimeout(() => { particle.remove(); }, duration * 1000);
        }
        setInterval(createGoldParticle, 400);


        // --- REPORT & DOWNLOAD ---
        function openDownloadModal() {
            calculateAll(true); 
            
            const date = new Date().toLocaleDateString(currentLang === 'km' ? 'km-KH' : 'en-US');
            document.getElementById('report-date').innerText = `Date: ${date}`;
            
            document.getElementById('report-income').innerText = document.getElementById('totalIncome').innerText;
            document.getElementById('report-expense').innerText = document.getElementById('totalExpense').innerText;
            document.getElementById('report-balance').innerText = document.getElementById('grandTotal').innerText;

            const listContainer = document.getElementById('report-expense-list');
            listContainer.innerHTML = '';
            
            const rows = document.querySelectorAll('#expenses-container .group');
            let hasItems = false;
            rows.forEach(row => {
                const name = row.querySelector('.expense-name-input').value || "Expense";
                const val = row.querySelector('.expense-input').value;
                if (val && parseFloat(val) > 0) {
                    hasItems = true;
                    const item = document.createElement('div');
                    item.className = "flex justify-between border-b border-dashed border-gray-200 pb-1 last:border-0";
                    item.innerHTML = `<span class="font-medium text-gray-600">${name}</span><span class="font-bold text-gray-800">$${parseFloat(val).toFixed(2)}</span>`;
                    listContainer.appendChild(item);
                }
            });

            if (!hasItems) {
                listContainer.innerHTML = '<div class="text-center italic text-xs opacity-50 py-2">- No Expenses -</div>';
            }

            toggleModal('download-modal');
        }

        function downloadImage() {
            const captureArea = document.getElementById('report-capture-area');
            html2canvas(captureArea, { scale: 2 }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'salary_receipt.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        const themeToggleBtn = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            htmlElement.classList.add('dark');
        } else {
            htmlElement.classList.remove('dark');
        }
        themeToggleBtn.addEventListener('click', () => {
            htmlElement.classList.toggle('dark');
            localStorage.theme = htmlElement.classList.contains('dark') ? 'dark' : 'light';
        });

        // --- EXPENSE TOGGLE FUNCTION ---
        function toggleExpensesList() {
            const content = document.getElementById('expenses-content');
            const btn = document.getElementById('btn-expense-toggle');
            const isHidden = content.classList.contains('hidden-content');
            
            if (isHidden) {
                content.classList.remove('hidden-content');
                content.classList.add('visible-content');
                btn.innerHTML = '<i data-lucide="eye-off" class="w-5 h-5"></i>'; // Eye Off = "Click to hide"
            } else {
                content.classList.remove('visible-content');
                content.classList.add('hidden-content');
                btn.innerHTML = '<i data-lucide="eye" class="w-5 h-5"></i>'; // Eye = "Click to show"
            }
            lucide.createIcons();
        }

        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) modal.classList.toggle('hidden');
        }

        function setInitialState() {
            // Expenses: Collapsed by default (Eye Off)
            const expContent = document.getElementById('expenses-content');
            const expBtn = document.getElementById('btn-expense-toggle');
            expContent.classList.add('hidden-content'); 
            expBtn.innerHTML = '<i data-lucide="eye" class="w-5 h-5"></i>'; // Initial: Eye = "Click to show"
            lucide.createIcons();
        }

        function calculateAll(isManualInput = false) {
            const baseSalary = parseFloat(document.getElementById('baseSalary').value) || 0;
            const workDays = parseFloat(document.getElementById('workDays').value) || 26;
            const workHours = parseFloat(document.getElementById('workHours').value) || 8;
            const hourlyRate = (baseSalary / workDays) / workHours;
            const rate150 = hourlyRate * 1.5;
            const rate200 = hourlyRate * 2.0;

            document.getElementById('rate100').innerText = '$' + hourlyRate.toFixed(2);
            document.getElementById('rate150').innerText = '$' + rate150.toFixed(2);
            document.getElementById('rate200').innerText = '$' + rate200.toFixed(2);
            document.getElementById('displayBaseSalary').innerText = '$' + baseSalary.toFixed(2);

            const input150 = document.getElementById('manualHours150');
            const input200 = document.getElementById('manualHours200');
            
            const finalHours150 = parseFloat(input150.value) || 0;
            const finalHours200 = parseFloat(input200.value) || 0;
            const money150 = finalHours150 * rate150;
            const money200 = finalHours200 * rate200;
            const totalOtMoney = money150 + money200;
            document.getElementById('displayTotalOT').innerText = '$' + totalOtMoney.toFixed(2);

            let otherIncome = 0;
            document.querySelectorAll('.income-input').forEach(input => {
                otherIncome += parseFloat(input.value) || 0;
            });
            const totalIncome = baseSalary + totalOtMoney + otherIncome;
            document.getElementById('totalIncome').innerText = '$' + totalIncome.toFixed(2);

            let totalExpense = 0;
            document.querySelectorAll('.expense-input').forEach(input => {
                totalExpense += parseFloat(input.value) || 0;
            });
            document.getElementById('totalExpense').innerText = '$' + totalExpense.toFixed(2);
            document.getElementById('grandTotal').innerText = '$' + (totalIncome - totalExpense).toFixed(2);
        }

        // Initialize
        updateLanguage();
        initExpenses();
        setInitialState();
        calculateAll();
    </script>
</body>
</html>


